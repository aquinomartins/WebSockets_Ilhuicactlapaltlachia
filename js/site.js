/*
Jesus Cristo_O Caminho, A Verdade e A Vida
*/

var ChatApp = window.ChatApp || {};

(function scopeWrapper($) {


   
    

    var currentUsername = 'Student';

    var lastChat = null;

    var apiEndpoint = ChatApp.apiEndpoint;



    function ilhuicactlapaltlachia(MENSAGEM_ID, MENSAGEM_MESSAGE, MENSAGEM_SENDER, MENSAGEM_TIME, MENSAGEM_TEMPO, MENSAGEM_DADO001){
      

      
      
      if(MENSAGEM_SENDER == 11){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person3.identificador,person3.circle,person3.diamond,person3.triangle,person3.lado,person3.base,person3.cor,person3.escala,person3.linha,person3.corDaLinha);
  
      }
      
      else if(MENSAGEM_SENDER == 12){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person12.identificador,person12.circle,person12.diamond,person12.triangle,person12.lado,person12.base,person12.cor,person12.escala,person12.linha,person12.corDaLinha);
  
      }
      
      else if(MENSAGEM_SENDER == 13){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person13.identificador,person13.circle,person13.diamond,person13.triangle,person13.lado,person13.base,person13.cor,person13.escala,person13.linha,person13.corDaLinha);
  
      }
      
      else if(MENSAGEM_SENDER == 14){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person14.identificador,person14.circle,person14.diamond,person14.triangle,person14.lado,person14.base,person14.cor,person14.escala,person14.linha,person14.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 15){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person15.identificador,person15.circle,person15.diamond,person15.triangle,person15.lado,person15.base,person15.cor,person15.escala,person15.linha,person15.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 16){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person16.identificador,person16.circle,person16.diamond,person16.triangle,person16.lado,person16.base,person16.cor,person16.escala,person16.linha,person16.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 17){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person17.identificador,person17.circle,person17.diamond,person17.triangle,person17.lado,person17.base,person17.cor,person17.escala,person17.linha,person17.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 18){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person18.identificador,person18.circle,person18.diamond,person18.triangle,person18.lado,person18.base,person18.cor,person18.escala,person18.linha,person18.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 19){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person19.identificador,person19.circle,person19.diamond,person19.triangle,person19.lado,person19.base,person19.cor,person19.escala,person19.linha,person19.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 20){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person20.identificador,person20.circle,person20.diamond,person20.triangle,person20.lado,person20.base,person20.cor,person20.escala,person20.linha,person20.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 21){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person21.identificador,person21.circle,person21.diamond,person21.triangle,person21.lado,person21.base,person21.cor,person21.escala,person21.linha,person21.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 22){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person22.identificador,person22.circle,person22.diamond,person22.triangle,person22.lado,person22.base,person22.cor,person22.escala,person22.linha,person22.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 23){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person23.identificador,person23.circle,person23.diamond,person23.triangle,person23.lado,person23.base,person23.cor,person23.escala,person23.linha,person23.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 24){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person24.identificador,person24.circle,person24.diamond,person24.triangle,person24.lado,person24.base,person24.cor,person24.escala,person24.linha,person24.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 25){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person25.identificador,person25.circle,person25.diamond,person25.triangle,person25.lado,person25.base,person25.cor,person25.escala,person25.linha,person25.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 26){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person26.identificador,person26.circle,person26.diamond,person26.triangle,person26.lado,person26.base,person26.cor,person26.escala,person26.linha,person26.corDaLinha);
  
      }
      
      else if(MENSAGEM_SENDER == 27){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person27.identificador,person27.circle,person27.diamond,person27.triangle,person27.lado,person27.base,person27.cor,person27.escala,person27.linha,person27.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 28){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person28.identificador,person28.circle,person28.diamond,person28.triangle,person28.lado,person28.base,person28.cor,person28.escala,person28.linha,person28.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 29){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person29.identificador,person29.circle,person29.diamond,person29.triangle,person29.lado,person29.base,person29.cor,person29.escala,person29.linha,person29.corDaLinha);
  
      }
      
      
      else if(MENSAGEM_SENDER == 30){

        //$('#range7').val(MENSAGEM_MESSAGE);
        var identidade = "#"+MENSAGEM_ID; 
        anima7(MENSAGEM_MESSAGE,person30.identificador,person30.circle,person30.diamond,person30.triangle,person30.lado,person30.base,person30.cor,person30.escala,person30.linha,person30.corDaLinha);
  
      }else{
        var identidade = "#"+MENSAGEM_ID;
        $(identidade).attr("d",MENSAGEM_MESSAGE);
        $(identidade).text('{ "name": "' + MENSAGEM_MESSAGE + '", "iidd":"' + MENSAGEM_ID + '", "sender":"' + MENSAGEM_ID + '", "tempo":"ESSE505", "dado001":"Jesus" }');
    }
  }
    

  
    ChatApp.loadChat = function () {
        $.get(apiEndpoint + '/conversations/' + 1).done(function (result) {
            var lastRendered = lastChat === null ? 0 : lastChat;
            if((lastChat === null && result.last) || lastChat < result.last) {
                lastChat = result.last;
            } else {
                return;
            }
            result.messages.forEach(function (message) {
                if(message.time > lastRendered) {
                    var panel = $('<div class="panel">');
                    if (message.sender === currentUsername) {
                        panel.addClass('panel-default');
                        
                    } else {
                        panel.addClass('panel-info');
                        panel.append('<div class="panel-heading">' + message.sender + '</div>');
                    }
                    var body = $('<div class="panel-body">').text(message.ID);
                    panel.append(body);
                    panel.append('<div class="panel-footer messageTime" data-time="' + message.time + '">' + moment(message.time).fromNow() + '</div>');
                    

                    ilhuicactlapaltlachia(message.ID, message.message, message.sender, message.time, message.tempo, message.dado001);


                    
                    var row = $('<div class="row">');
                    var buffer = $('<div class="col-xs-4">');
                    var holder = $('<div class="col-xs-8">');
                    holder.append(panel);

                     

                    if (message.sender === currentUsername) {
                        row.append(buffer);
                        row.append(holder);
                        //add2(message.message);
                        
                    } else if(message.ID === 7){
                      //alert("Jesus Cristo_O Caminho, A Verdade e A Vida")
                    }
                    
                    else {
                        row.append(holder);
                        row.append(buffer);
                    }

                    $('#chat').append(row);

                    
                }
            });

            
            window.scrollTo(0, document.body.scrollHeight);
        });
    };

        ChatApp.send = function () {
          //animaModal(event.screenY*2, person2.identificador2,person2.circle,person2.diamond,100,person2.base);
            $.post(apiEndpoint + '/conversations/' + location.hash.substring(1), $('#text-text').val())
                .done(function () {
                    $('#text-text').val('').focus();
                    
                    ChatApp.loadChat();
                });
    
        };


    $().ready(init);

    function edit($event) {
      var $elem = $($event.target)
      
      if($elem.prop("nodeName") === "text") {
        $("#text-edit-modal").modal("show").data("current-element", $elem);
        $("#text-text").val($elem.text());
        
        
      }else if ($elem.prop("nodeName") === "path") {
        $("#text-edit-modal").modal("show").data("current-element", $elem);

        $("#text-text").val($elem.text());
        

        //const objeto = JSON.parse($elem.text());
        
        //alert("Cristo");
        
        //$("#text-text2").val($elem.val());
        //$("#range7").val();
        //$elem2.text(gama);
        //$elem.ranger(gama);
        //$elem.text("range",gama);
      }
    }


    var lastClickPosition;


    function editar($event) {
      var $elem = $($event.target)
      var elementoTexto = $elem.text();

        var objetoArvre = JSON.parse(elementoTexto);
      var personagem = objetoArvre.iidd;

      if(objetoArvre.iidd)

      var touch = event.targetTouches[0];
    switch (personagem) {
        

        case '11':
            anima7(touch.pageY*30,person3.identificador,person3.circle,person3.diamond,person3.triangle,person3.lado,person3.base,person3.cor,person3.escala,person3.linha,person3.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '12':
            anima7(touch.pageY*30,person12.identificador,person12.circle,person12.diamond,person12.triangle,person12.lado,person12.base,person12.cor,person12.escala,person12.linha,person12.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '13':
            anima7(touch.pageY*30,person13.identificador,person13.circle,person13.diamond,person13.triangle,person13.lado,person13.base,person13.cor,person13.escala,person13.linha,person13.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '14':
            anima7(touch.pageY*30,person14.identificador,person14.circle,person14.diamond,person14.triangle,person14.lado,person14.base,person14.cor,person14.escala,person14.linha,person14.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '15':
            anima7(touch.pageY*30,person15.identificador,person15.circle,person15.diamond,person15.triangle,person15.lado,person15.base,person15.cor,person15.escala,person15.linha,person15.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '16':
            anima7(touch.pageY*30,person16.identificador,person16.circle,person16.diamond,person16.triangle,person16.lado,person16.base,person16.cor,person16.escala,person16.linha,person16.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '17':
            anima7(touch.pageY*30,person17.identificador,person17.circle,person17.diamond,person17.triangle,person17.lado,person17.base,person17.cor,person17.escala,person17.linha,person17.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '18':
            anima7(touch.pageY*30,person18.identificador,person18.circle,person18.diamond,person18.triangle,person18.lado,person18.base,person18.cor,person18.escala,person18.linha,person18.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '19':
            anima7(touch.pageY*30,person19.identificador,person19.circle,person19.diamond,person19.triangle,person19.lado,person19.base,person19.cor,person19.escala,person19.linha,person19.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '20':
            anima7(touch.pageY*30,person20.identificador,person20.circle,person20.diamond,person20.triangle,person20.lado,person20.base,person20.cor,person20.escala,person20.linha,person20.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '21':
            anima7(touch.pageY*30,person21.identificador,person21.circle,person21.diamond,person21.triangle,person21.lado,person21.base,person21.cor,person21.escala,person21.linha,person21.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '22':
            anima7(touch.pageY*30,person22.identificador,person22.circle,person22.diamond,person22.triangle,person22.lado,person22.base,person22.cor,person22.escala,person22.linha,person22.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;
        
        case '23':
            anima7(touch.pageY*30,person23.identificador,person23.circle,person23.diamond,person23.triangle,person23.lado,person23.base,person23.cor,person23.escala,person23.linha,person23.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '24':
            anima7(touch.pageY*30,person24.identificador,person24.circle,person24.diamond,person24.triangle,person24.lado,person24.base,person24.cor,person24.escala,person24.linha,person24.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '25':
            anima7(touch.pageY*30,person25.identificador,person25.circle,person25.diamond,person25.triangle,person25.lado,person25.base,person25.cor,person25.escala,person25.linha,person25.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '26':
            anima7(touch.pageY*30,person26.identificador,person26.circle,person26.diamond,person26.triangle,person26.lado,person26.base,person26.cor,person26.escala,person26.linha,person26.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '27':
            anima7(touch.pageY*30,person27.identificador,person27.circle,person27.diamond,person27.triangle,person27.lado,person27.base,person27.cor,person27.escala,person27.linha,person27.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '28':
            anima7(touch.pageY*30,person28.identificador,person28.circle,person28.diamond,person28.triangle,person28.lado,person28.base,person28.cor,person28.escala,person28.linha,person28.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '29':
            anima7(touch.pageY*30,person29.identificador,person29.circle,person29.diamond,person29.triangle,person29.lado,person29.base,person29.cor,person29.escala,person29.linha,person29.corDaLinha);
            $("#text-text").val('{"name":"'+ touch.pageY*30 + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

        case '30':
            anima7(((touch.pageY*30)+(touch.pageX)),person30.identificador,person30.circle,person30.diamond,person30.triangle,person30.lado,person30.base,person30.cor,person30.escala,person30.linha,person30.corDaLinha);
            $("#text-text").val('{"name":"'+ ((touch.pageY*30)+(touch.pageX)) + '","iidd":"' + objetoArvre.iidd + '", "sender":"' + objetoArvre.iidd + '", "tempo":"ESSE505", "dado001":"' + objetoArvre.dado001 + '" }');
            window.ChatApp.send();
            break;

    default:
        
}


      
    }

    

    function textSave() {
      $("#text-edit-modal").modal("hide");
      var $elem = $("#text-edit-modal").data("current-element")
      $elem.text($("#text-text").val());
    }

    /*function textSave4() {
      $("#text-edit-modal").modal("hide");
      var $elem = $("#text-edit-modal").data("current-element")
      $elem.text($("#text-text").val());
      //anima($("#text-text").val());
    }*/


    function add($event) {
      var $canvas = $("#canvas");
      var elem;
      var doc = document;
      var NS = canvas.getAttribute('xmlns');
      var point = canvas.createSVGPoint()
      var $elem;
      point.x = $event.offsetX;
      point.y = $event.offsetY;
      var svgCoords = point.matrixTransform(canvas.getScreenCTM().inverse());
      if ($canvas.hasClass("active")) {
        if ($canvas.hasClass("text")) {
          elem = doc.createElementNS(NS, "text");
          $elem = $(elem).attr({
            "x": svgCoords.x,
            "y": svgCoords.y,
            "width": 50,
            "height": 50
          });
          $elem.text("TEXT")

        }
        $elem.attr("fill", "#ffd700");
        $canvas.append($elem);
        $canvas.removeClass("active");
        $elem.on("mouseenter", edit);
       

         
      }
    }

    function add2(alpha) {
    var $canvas = $("#canvas");
    var elem;
    var doc = document;
    var NS = canvas.getAttribute('xmlns');
    var point = canvas.createSVGPoint()
    var $elem;
    point.x = 300;
    point.y = 300;
    var svgCoords = point.matrixTransform(canvas.getScreenCTM().inverse());
    
      
        elem = doc.createElementNS(NS, "text");
        $elem = $(elem).attr({
          "x": 300,
          "y": 300,
          "width": 50,
          "height": 50
        });
        $elem.text(alpha)

        $elem.attr("fill", "#ffd700");
        $canvas.append($elem);
        $canvas.removeClass("active");
        $elem.on("click", edit);
  }

  
  function add3(gama, corFill, corStroke, alfa, id) {
    var $canvas = $("#canvas");
    var elem;
    var g;
    var $g;
    var doc = document;
    var NS = canvas.getAttribute('xmlns');
    var point = canvas.createSVGPoint()
    var $elem;

    elem = doc.createElementNS(NS, "g");

    elem = doc.createElementNS(NS, "path");
    elem.setAttributeNS(null, "id", id);

        $elem = $(elem).attr({

          "d": gama
        });

        $elem.text('{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"ESSE505" }');
        infos = '{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"505" }';
    
        

        $elem.attr("fill", corFill);
        $elem.attr("stroke", corStroke);
        $elem.attr("fill-opacity", alfa);
        $canvas.append($elem);
        $canvas.removeClass("active");
        $elem.on("click", edit);

  }


  function add4(gama, cor, alfa, id, obj) {
    var $canvas = $("#canvas");
    var elem;
    var g;
    var $g;
    var doc = document;
    var NS = canvas.getAttribute('xmlns');
    var point = canvas.createSVGPoint()
    var $elem;
    var $elem2 = "300";

    elem = doc.createElementNS(NS, "g");

    elem = doc.createElementNS(NS, "path");
    elem.setAttributeNS(null, "id", id);

        $elem = $(elem).attr({

          "d": gama
        });

        $elem.text('{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '", "dado001":"' + obj + '"}');
        //$elem.text('{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '"}');
        //$elem.range("300");
        infos = '{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '"}';

        
        //$elem.val(gama);

        $elem.attr("fill", cor);
        $elem.attr("stroke", cor);
        $elem.attr("fill-opacity", alfa);
        $canvas.append($elem);
        $canvas.removeClass("active");
        $elem.on("touchmove", editar);
        $elem.on("mousemove", editar);
        $elem.on("mouseup", window.ChatApp.send);
        $elem.on("touchend", window.ChatApp.send);
        //$elem.on("touchcancel", edit);
        //document.addEventListener('ontouchcancel', storePosition, true);
        //ontouchcancel
        

        //$("#text-text").val($elem.text());
        //$('#send').on('click', window.ChatApp.send);
        /*var inputTamanho = document.querySelector('[name=tamanho]');
        var outputTamanho = document.querySelector('[name=valortamanho]');
        inputTamanho.oninput = function() {
        outputTamanho.value = inputTamanho.value;
        console.log(inputTamanho.value);
      }*/

  }

  function add5(gama, cor, alfa, id) {
    var $canvas = $("#canvasModal");
    var elem;
    var g;
    var $g;
    var doc = document;
    var NS = canvas.getAttribute('xmlns');
    var point = canvas.createSVGPoint()
    var $elem;

    elem = doc.createElementNS(NS, "g");

    elem = doc.createElementNS(NS, "path");
    elem.setAttributeNS(null, "id", id);

        $elem = $(elem).attr({

          "d": gama
        });

        $elem.text('{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '"}');
        infos = '{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '"}';

        $elem.attr("fill", cor);
        $elem.attr("stroke", cor);
        $elem.attr("fill-opacity", alfa);
        $canvas.append($elem);
        $canvas.removeClass("active");
        $elem.on("click", edit);

  }


  function add7(gama, cor, alfa, id, obj) {
    var $canvas = $("#canvas");
    var elem;
    var g;
    var $g;
    var doc = document;
    var NS = canvas.getAttribute('xmlns');
    var point = canvas.createSVGPoint()
    var $elem;
    var $elem2 = "300";

    elem = doc.createElementNS(NS, "g");

    elem = doc.createElementNS(NS, "path");
    elem.setAttributeNS(null, "id", id);

        $elem = $(elem).attr({

          "d": gama
        });

        $elem.text('{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '", "dado001":"' + obj + '"}');
        //$elem.text('{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '"}');
        //$elem.range("300");
        infos = '{ "name": "' + gama + '", "iidd":"' + id + '", "sender": "4", "tempo":"' + gama + '"}';

        
        //$elem.val(gama);

        $elem.attr("fill", cor);
        $elem.attr("stroke", "none");
        $elem.attr("fill-opacity", "1");
        $canvas.append($elem);
        $canvas.removeClass("active");
        $elem.on("touchmove", editar);
        $elem.on("mousemove", editar);
        $elem.on("mouseup", window.ChatApp.send);
        $elem.on("touchend", window.ChatApp.send);
        

  }


  
  
  
    function loadCursor($event){
      var $canvas = $("#canvas");
      var type = $($event.target).data("type");
      if ($canvas.hasClass("active") && $canvas.hasClass(type)) {
        $canvas.removeClass("active " + type);
      }
      else if ($canvas.hasClass("active")) {
        $canvas.removeClass("circle text square");
        $canvas.addClass(type);
      } else {
        $canvas.removeClass("circle text square");
        $canvas.addClass("active " + type);
      }
    }



    function init() {
      $(".controls .btn").on("click", loadCursor);      
      $("#send").on("click", textSave);
      //$("#send4").on("click", textSave4);
      $("#canvas").on("click", add);
      
                        //add3("M331 530 c175 200, 60 100, 130 30 Z", "red", "green", "0.4", "0");
                        
                        //add3("M331 530 c175 200, 60 100, 130 30 Z", "green", "green", "0.4", "2");
                        //add3("M331 530 c175 200, 60 100, 130 30 Z", "#4f2114", "#000000", "0.4", "4");
                        //add3("M331 530 c175 200, 60 100, 130 30 Z", "black", "red", "0.6", "3");
                        //add3("M331 530 c175 200, 60 100, 130 30 Z", "#a16f57", "black", "1", "5");

                        //add4("420", "#8B4513", "0.5", "7", "person1");
                        //add4("420", "green", "0.5", "8");
                        //add4("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "0.5", "9", "person2");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "23", "person23"); //Nuvem

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "30", "person30"); // Arvrinha

                        /*add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "29", "person29");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "28", "person28");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "27", "person27");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "26", "person26");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "25", "person25");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "24", "person24");

                        

                        

                        

                        */

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "19", "person19");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "18", "person18"); // Barranco

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "17", "person17"); // Grama

                        

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "15", "person15");

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "22", "person22"); // Árvore Pequena

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "13", "person13"); // Árvore Pequena

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "21", "person21");//flores

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "14", "person14"); // Árvore Grande

                        

                        //add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "11", "person3");

                        

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#000000", "1", "12", "person12"); //Mato da frente

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "16", "person16");//flores

                        add7("M331 530 c175 200, 60 100, 130 30 Z", "#ffd700", "1", "20", "person20");//flores

                        

                        

                        
                        //add4("420", "#8B4513", "0.5", "10");
                        //add5("M331 530 c175 800, 60 100, 130 30 Z", "#ffd700", "0.5", "11");
                        //add3("M331 530 c175 200, 60 100, 130 30 Z", "#000000", "#ffffff", "1", "1");
                        //animaModal(2000, person2.identificador2,person2.circle,person2.diamond,100,person2.base);
                        //add6();
    }

}(jQuery));
